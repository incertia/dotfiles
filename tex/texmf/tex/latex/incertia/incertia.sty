\ProvidesPackage{incertia}

% we need this for options
\usepackage{kvoptions}

\newif\ifincertiageom\incertiageomtrue
\newif\ifincertiasection\incertiasectiontrue
\newif\ifincertiasubsection\incertiasubsectionfalse
\newif\ifincertiacd\incertiacdfalse
\newif\ifincertiaasy\incertiaasyfalse
\newif\ifincertiasets\incertiasetstrue
\newif\ifincertiadisplay\incertiadisplaytrue

\DeclareOption{geom}{\incertiageomtrue}
\DeclareOption{nogeom}{\incertiageomfalse}
\DeclareOption{section}{\incertiasectiontrue}
\DeclareOption{nosection}{\incertiasectionfalse}
\DeclareOption{subsection}{\incertiasubsectiontrue}
\DeclareOption{nosubsection}{\incertiasubsectionfalse}
\DeclareOption{cd}{\incertiacdtrue}
\DeclareOption{nocd}{\incertiacdfalse}
\DeclareOption{asy}{\incertiaasytrue}
\DeclareOption{noasy}{\incertiaasyfalse}
\DeclareOption{sets}{\incertiasetstrue}
\DeclareOption{nosets}{\incertiasetsfalse}
\DeclareOption{display}{\incertiadisplaytrue}
\DeclareOption{nodisplay}{\incertiadisplayfalse}
\DeclareStringOption{defn}

\ProcessOptions\relax
\ProcessKeyvalOptions*

% some default packages
\ifincertiageom
\usepackage[margin=1in]{geometry}
\fi

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{centernot}
\usepackage{fancyhdr}
% \usepackage[cal=cm,bb=ams,frak=boondox,scr=rsfso]{mathalfa}
% \usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{siunitx}
\usepackage{tikz}
\ifincertiacd
\usepackage{tikz-cd}
\fi
\usepackage{xfrac}
\usepackage{faktor}
\usepackage[mathscr]{euscript}

% tikz things
\usetikzlibrary{arrows}
\usetikzlibrary{patterns}

% \DeclareFontFamily{U}{mt2ms}{\skewchar\font42}
% \DeclareFontShape{U}{mt2ms}{m}{n}{}{}

\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}
% \DeclareMathAlphabet{\mathmtc}{OT1}{mt2ms}{m}{it}

% set related commands
% common sets
\ifincertiasets
\newcommand{\CC}{\mathbb{C}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\FF}{\mathbb{F}}

% powerset is done with mathcal
\newcommand{\PP}{\mathcal{P}}
\fi

% isomorphic sets denoted by congruence
\newcommand{\iso}{\cong}

% asymptote
\ifincertiaasy
\usepackage{asymptote}

\begin{asydef}
import cse5;
import graph;
import markers;
import olympiad;

pointpen = black;
pathpen = black;
pathfontpen = black;
anglepen = black;
anglefontpen = black;
pointfontsize = 10;

defaultpen(fontsize(10pt));

size(6cm);

marker angleticker(int _n, real sz) {
  return marker(markinterval(stickframe(n=_n, sz), true));
}

usepackage("amsmath");
usepackage("amssymb");
usepackage("siunitx");
\end{asydef}
\fi

% theorem
\usepackage{amsthm}

% setup definition/theorem etc
\newtheoremstyle{norm}
{3pt}
{3pt}
{}
{}
{\bf}
{:}
{.5em}
{}

\theoremstyle{norm}
\ifincertiasection
\newtheorem{thm}{Theorem}[section]
\else
\newtheorem{thm}{Theorem}
\fi
\newtheorem{lem}[thm]{Lemma}
\newtheorem{df}[thm]{Definition}
\newtheorem{rem}[thm]{Remark}
\newtheorem{st}{Step}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{clm}[thm]{Claim}
\newtheorem{exr}[thm]{Exercise}
\newtheorem{ex}[thm]{Example}
\ifincertiasection
\ifincertiasubsection
\newtheorem{prb}{Problem}[subsection]
\else
\newtheorem{prb}{Problem}[section]
\fi
\else
\newtheorem{prb}{Problem}
\fi
% \newtheorem{prb}[thm]{Problem}
\newtheorem{note}[thm]{Note}

% i like parskip
\usepackage{parskip}

% this is usually nice
% \usepackage{enumerate}
\usepackage[shortlabels]{enumitem}

% hyperbolic trig
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\csch}{csch}
\DeclareMathOperator{\arcsec}{arcsec}
\DeclareMathOperator{\arccot}{arccot}
\DeclareMathOperator{\arccsc}{arccsc}
\DeclareMathOperator{\arccosh}{arccosh}
\DeclareMathOperator{\arcsinh}{arcsinh}
\DeclareMathOperator{\arctanh}{arctanh}
\DeclareMathOperator{\arcsech}{arcsech}
\DeclareMathOperator{\arccsch}{arccsch}
\DeclareMathOperator{\arccoth}{arccoth}

% just useful shorthand
\renewcommand{\st}{\,\operatorname{s.t.}\,}
\let\hom\relax
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\aff}{aff}
\DeclareMathOperator{\Aff}{Aff}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\rk}{rk}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\tr}{Tr}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\adj}{adj}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\orb}{orb}
\DeclareMathOperator{\stab}{stab}
\DeclareMathOperator{\fix}{fix}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\chr}{char}
\DeclareMathOperator{\cent}{C}
\DeclareMathOperator{\normal}{N}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\zdiv}{zdiv}
\DeclareMathOperator{\gl}{\mathfrak{gl}}
\let\sl\undefined
\DeclareMathOperator{\sl}{\mathfrak{sl}}
\DeclareMathOperator{\so}{\mathfrak{so}}
\DeclareMathOperator{\Ht}{ht}
\DeclareMathOperator{\nil}{nil}
\newcommand{\pvec}[1]{\vec{#1}\mkern2mu\vphantom{#1}}
\newcommand{\cycgroup}[1]{\left\langle #1 \right\rangle}
\newcommand{\gen}[1]{\left\langle #1 \right\rangle}
\newcommand{\set}[1]{\left\lbrace #1 \right\rbrace}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\op}{\textrm{op}}

% selectively define the defn command
%\ifincertia@defn@bold
%\newcommand{\defn}[1]{\textbf{#1}}%
%\fi
%\@namedef{incertia@defn@italic}{
%  \newcommand{\defn}[1]{\textit{##1}}
%}

% for easier math
\ifincertiadisplay
\everymath{\displaystyle}
\fi
\newcommand{\degree}{^\circ}

% define some arrows for easier use
\newcommand{\surj}{\twoheadrightarrow}
\newcommand{\inj}{\rightarrowtail}
\newcommand{\rsurj}{\twoheadleftarrow}
\newcommand{\rinj}{\leftarrowtail}
\newcommand{\bijection}{\leftrightarrow}
\newcommand{\biject}{\xrightarrow{\sim}}
\newcommand{\mono}{\rightarrowtail}
\newcommand{\monoh}{\hookrightarrow}
\newcommand{\epi}{\twoheadrightarrow}

\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
